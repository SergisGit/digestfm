!function(){"use strict";var s=$("body"),e=$(".js-letterBtn"),n=$("#js-letterPopup"),a=n.find("#js-letterForm");if(a.length){var i=n.attr("action"),r=n.find("#js-workerInput"),c=n.find("input,textarea"),l=(n.find("#js-letterSubmit"),n.find("#js-letterMsg")),p=n.find("#js-letterError"),d=n.find("#js-letterErrorBtn");$.each(e,function(e){var t=$(this),o=t.attr("data-id");t.on("click",function(){r.length&&o&&r.val(o),function(e,t){var o=e.find(".popup__msg");o.length&&o.removeClass("popup__msg--active"),t.length&&t.removeClass("hide-block"),s.addClass("overflow"),e.addClass("popup--active");var n=e.find(".popup__close-btn");function a(){n.off("click"),$(window).off("keydown.popup"),s.removeClass("overflow"),e.removeClass("popup--active")}n.on("click",function(){a()}),$(window).on("keydown.popup",function(e){27===e.keyCode&&a()})}(n,a)})}),a.on("submit",function(e){e.preventDefault();var o=new FormData;$.each(c,function(e){var t=$(this);o.append(t.attr("name"),t.val()),e!==c.length-1||c.hasClass("error")||$.ajax(i,{method:"POST",data:o,processData:!1,contentType:!1,success:function(){a.addClass("hide-block"),l.addClass("popup__msg--active"),c.val("")},error:function(){a.addClass("hide-block"),p.addClass("popup__msg--active"),d.on("click",function(){p.removeClass("popup__msg--active"),a.removeClass("hide-block"),d.off("click")})}})})})}}();